**Кейсы на Python**

*******************************************************************************************************************************************************************************************************

**⭕Расчет метрик**

1. Retention 15 дня (в процентах) для пользователей, зарегистрированных в январе 2021 года
   
2. Rolling retention 30 дня (в процентах) для пользователей из той же когорты
   
3. Lifetime по всем пользователям, посчитанный как интеграл от n-day retention
   
4. Churn rate 29 дня (в долях), посчитанный по всем пользователям
   
5. Mau, Wau, Dau за последний месяц/неделю/день записей (декабрь 2021 г.)
   
6. Усредненные mau, wau, dau
   
**_Примерный результат выполенения:_**

Метрика Retention 15 дня - 54.65116

Метрика Rolling retention 30 дня - 29.06977

Метрика LifeTime - 14.804

Метрика Churn rate 29 дня (в долях) - 0.509

Метрики: 
 MAU - 133,
 WAU - 84,
 DAU - 47 

 Усредененные метрики: 
 AVG_MAU - 102.58333,
 AVG_WAU - 89.86792,
 AVG_DAU - 40.5589 

<img width="571" height="454" alt="image" src="https://github.com/user-attachments/assets/87f5b565-aade-4bbf-8365-fe06216bed58" />

*******************************************************************************************************************************************************************************************************

**Анализ образовательной платформы**

**⭕Анализ логов на основе генератора списков**

Есть некоторое количество пользователей с подключенным автопродлением подписки. Кто-то её подключает, кто-то отключает. Иногда  пользователь может убрать способ оплаты, что вызовет ошибку при списании. Необходимо определить соотношение успешных автопродлений к неуспешным. Все сообщения с ошибками о списаниях содержат в первом столбце - ERROR. Успешные же продления не содержат после себя строки с ошибкой. Функция count_success_and_failure принимает на вход путь к файлу с логами и подсчитывает количество успешных продлений и ошибок при списании. Функция возвращает кортеж из двух значений: количества успешных попыток и неуспешных.

 (1034, 186)

 <img width="735" height="411" alt="image" src="https://github.com/user-attachments/assets/cce5c02f-5190-4dbc-94ad-f66dda3e9add" />

 

**⭕Сглаженные значения методом скользящего среднего и медианного сглаживания (файл auto_purchase.log)**
 
В логе есть сообщение о количестве людей с автопродлением подписки на сегодняшний день. Функция auto_renewal_sub принимает на вход путь к файлу с логами и обрабатывает количество клиентов с автопродлением подписки. Необходимо посмотреть на изменение этого показателя в динамике: получить сглаженные значения с помощью метода скользящего среднего и метода медианного сглаживания. При сглаживании берем все предыдущие значения, включая текущее, будущие значения не берем. 

 Среднее: [1.0, 0.5, 0.33, 0.25, ....
 
 Медиана: [1, 0.5, 0, 0.0, ......
 
 
**⭕Успешные продления подписки по дням недели (файл auto_purchase.log)**

Функция sub_renewal_by_day принимает на вход путь к файлу с логами и анализирует взаимосвязь дня продления подписки и количества продлений в этот день. Функция выводит в файл weekdays.txt аналитическую записку.

**_Пример выполнения:_**

Количество обновлений подписки по дням недели:

Понедельник: 136

Вторник: 144

Среда: 162

Четверг: 169

Пятница: 145

Суббота: 135

Воскресенье: 143

Сохранение результатов в файл weekdays.txt

<img width="624" height="455" alt="image" src="https://github.com/user-attachments/assets/fc601de5-5cdd-48ed-b822-732c2b7d8f19" />

*******************************************************************************************************************************************************************************************************

**⭕Numpy. Расчет статистических данных службы такси**

1.Средняя скорость такси.

2.Кол-в поездок за февраль текущего года.

3.Кол-в поездок с чаевыми более 50$.

4.Массив ковариаций - как связаны длительность по времени, по расстоянию, стоимость поездки и чаевые.

**_Пример выполнения:_**

Средняя скорость такси 32.24258580925573

Кол-в поездок за февраль 13333

Кол-в поездок с чаевыми более 50$ 16

Массив ковариаций - как связаны длительность по времени, по расстоянию, стоимость поездки и чаевые 

[[26.71 3413.20 68.19 6.67]

 [3413.20 10489667.24 11345.40 924.20]
 
 [68.19 11345.40 269.92 45.80]
 
 [6.67 924.20 45.80 23.35]]

 <img width="1302" height="530" alt="image" src="https://github.com/user-attachments/assets/6052afed-55ed-4794-84bc-f76446df2c99" />

*******************************************************************************************************************************************************************************************************

⭕**Расчет динамики продаж в аптеке разными способами**

1.при помощи rolling (обращение к элементам из окна);

2.при помощи shift - сдвига;

3.при помощи pct_change - % разности между текущим и предыдущим значением.

_**Пример выполнения:**_

DR_Dat		revenue	revenue_rolling	revenue_shift	revenue_shifted	revenue_pct_change
					
2022-08-01	84681.52	NaN	NaN	NaN	NaN

2022-08-02	71389.37	-0.16	84681.52	-0.16	-0.16

2022-08-03	78050.82	0.09	71389.37	0.09	0.09

2022-08-04	59187.36	-0.24	78050.82	-0.24	-0.24

2022-08-05	56458.81	-0.05	59187.36	-0.05	-0.05

<img width="587" height="455" alt="image" src="https://github.com/user-attachments/assets/964e34e9-dedf-428c-87bb-c5a9a4560c1c" />


